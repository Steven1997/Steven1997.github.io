---
title: Java学习总结之继承和多态
date: 2017-10-12 23:18:55
tags: Java
---
### 父类与子类  
在Java术语中，如果C1类扩展自另一个类C2，我们称C2为父类，也称超类或基类，称C1为子类，也称次类、扩展类、派生类。父类是更通用的类，子类是扩充父类得到的更特定的类。子类从它的父类中继承可访问的数据域和方法，还可以添加新的数据域和方法。从物理层面来看，为子类对象开辟的内存的前一部分存储从父类继承的成员(可访问)，后面再放置子类新扩展的成员。
### 继承  
面向对象的编程允许从已经存在的类中定义新的类，这称为继承。继承可以使得子类别具有父类别的各种属性和方法，而不需要再次编写相同的代码。在令子类别继承父类别的同时，可以重新定义某些属性，并重写某些方法，即覆盖父类别的原有属性和方法，使其获得与父类别不同的功能。另外，为子类别追加新的属性和方法也是常见的做法。继承通过extends关键字实现。  
#### 继承有如下几个关键点  
1.子类并不是父类的一个子集，实际上，一个子类通常比它的父类包含更多的信息和方法  
2.父类中的私有数据域在该类之外是不可访问的，故不能在子类中直接使用，如果父类中定义了公共访问器或修改器，可以在子类中调用它们  
3.不是所有的“是一种”(is-a)关系都该用继承来建模  
4.继承是用来为“是一种”关系(is-a)建模的，不要仅仅为了重用方法这个原因而盲目使用继承  
5.Java中类与类的继承是单一继承  
### super关键字  
super关键字有两种作用：  
**1.调用父类的构造方法**  
因为继承时父类的构造方法不会被继承，而子类的构造方法只能初始化子类新增加的数据域，所以要通过super关键字调用父类的构造方法来初始化从父类继承的数据域。  
形式是`super()`或`super(arguments)`，分别调用了父类的无参构造方法和相应的有参构造方法。super语句要写在子类构造方法的第一条，否则编译器会自动在构造方法开头插入一条`super()`  
**2.调用父类的方法**  
在继承时往往会进行重写，即覆盖父类的方法。此时如果要调用父类原有的未被覆盖的方法，就可以使用`super.方法名`来调用父类的方法。如果父类方法没有被覆盖，可以省略super关键字。只能调用一级父类的方法，不可以跨父类，`super.super.方法名`是不合法的。  

### 构造方法链  
在任何情况下，构造一个类的实例时，将会调用沿着继承链的所有父类的构造方法。当构造一个子类对象时，子类构造方法会在完成自己的任务之前，首先调用它的父类的构造方法。如果父类继承自其他类，那么父类构造方法又会在完成自己的任务之前，调用它自己的父类的构造方法。这个过程一直持续到这个继承体系结构的最后一个构造方法被调用为止。这就是构造方法链。比如下面的代码：  
```java
public class Faculty extends Employee{
	public static void main(String[] args){
       new Faculty();
    }
    public Faculty(){
    	System.out.println("(4) Performs Faculty's tasks");
    }
 }
class Employee extends Person{
	public Employee(){
		this("(2) Invoke Employee's overloaded constructor");
        System.out.println("(3) Perfoms Employee's tasks");
    }
    public Employee(String s){
	  System.out.println(s);
    }
 }
 class Person{
 	public Person() {
    	System.out.println("(1) Performs Person's tasks");
     }
 }
```  
打印结果为:  
(1) Performs Person's tasks  
(2) Invoke Employee's overloaded constructor  
(3) Performs Employee's tasks  
(4) Performs Faculty's tasks  

我们可以知道：子类的构造方法的第一条语句要么是**super语句(包括编译器隐式插入的)**,要么是**this语句**，它通过调用同一个类的另一个重载的构造方法，再调用该方法的super语句初始化父类  

注意:如果没有显式在子类构造方法中定义super语句，编译器自动插入的super语句匹配的是父类的无参构造方法，如果父类没有无参构造方法，编译器会报错。所以建议为每个类都提供一个无参构造方法，以便于日后对该类进行扩展。  
### 方法重载与重写  
**重载**  
方法重载是指在一个类中定义多个同名的方法，但要求每个方法具有不同的参数的类型或参数的个数。重载的方法方法名相同，返回值类型可以不同，参数列表必须不同(包括参数个数、类型和次序，有一个不同就算不同)  

**重写**  
方法重写是指在继承时子类覆盖父类中已有的方法并提供对其的新的实现(修改方法体)。重写的方法和原方法返回值类型、方法名、参数列表均相同，可见性修饰符范围不可缩小(要么相同要么扩大)。  
为了避免错误，可以使用重写标注，在要重写的方法前加上`@Override`，该标注会强制编译器检查是否重写了某方法，如果没有重写，编译器会报告一个错误。

**关于重写的几点注意**  
1.仅当实例方法时刻访问的，它才能被覆盖  
2.静态方法可以被继承，但不能被覆盖。如果子类中重新定义了父类的静态方法，父类的静态方法会被隐藏，可以使用父类名.静态方法名调用隐藏的静态方法  

方法重写发生在通过继承而相关的不同类中，方法重载可以发生在同一类中，也可以发生在由于继承关系而相关的不同类中。
